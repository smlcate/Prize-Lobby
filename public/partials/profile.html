
<div class="container" ng-controller="ProfileController">
  <h2>{{ profile.username }}'s Profile</h2>

  <div class="row">
    <div class="col-md-6">
      <h4>Wallet Balance</h4>
      <p>{{ profile.wallet_balance / 100 | currency }}</p>
    
<!-- Apex Match Verification -->
<div ng-controller="VerifyMatchController" ng-include="'partials/verify-match.html'"></div>
</div>
    <div class="col-md-6">
      <h4>Gamertags</h4>
      <ul>
        <li ng-repeat="gamertag in profile.gamertags">
          {{ gamertag.platform }}: {{ gamertag.username }}
          <button class="btn btn-sm btn-danger" ng-click="removeGamertag(gamertag.id)">Remove</button>
        </li>
      </ul>
      <form ng-submit="addGamertag()">
        <input type="text" ng-model="newGamertag.username" placeholder="Username" required />
        <select ng-model="newGamertag.platform" required>
          <option value="xbox">Xbox</option>
          <option value="psn">PlayStation</option>
          <option value="steam">Steam</option>
        </select>
        <button type="submit" class="btn btn-sm btn-success">Add Gamertag</button>
      </form>
    </div>
  </div>

  <hr />

  <h4>Notifications</h4>
  <ul>
    <li ng-repeat="note in profile.notifications">{{ note.message }}</li>
  </ul>

  <hr />

  <h3>Recent Challenge Results</h3>
  <table class="table table-striped" ng-if="recentResults.length > 0">
    <thead>
      <tr>
        <th>Title</th>
        <th>Status</th>
        <th>Opponent</th>
        <th>Your Score</th>
        <th>Opponent Score</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="result in recentResults">
        <td>{{ result.title }}</td>
        <td>{{ result.status }}</td>
        <td>{{ result.opponent }}</td>
        <td>{{ result.user_score }}</td>
        <td>{{ result.opponent_score }}</td>
      </tr>
    </tbody>
  </table>
  <p ng-if="recentResults.length === 0">No recent results found.</p>
</div>
